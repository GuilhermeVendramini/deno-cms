<%- await include(`${Deno.cwd()}${Deno.env.get('THEME')}templates/layout/header.ejs`, { title: 'Basic Page' }) %>
<% if (currentUser) { %>
  <%- await include(`${Deno.cwd()}${Deno.env.get('THEME')}templates/menus/adminMenu.ejs`, { currentUser: currentUser}) %>
<% } %>
<div class="container h-100 pt-4">
  <h1 class="text-center mb-3">Basic Page</h1>
  <% if (message) { %>
    <div class="alert alert-danger">
      <%= message %>
    </div>
  <% } %>
  <form action="/admin/content/basic-page/add" method=post>
    <input id="id" name="id" type="hidden" value='<%= content?._id?.$oid %>'>
    <div class="form-group">
      <label>Title</label>
      <input type="text" required value="<%= content?.data?.title %>" name="title" class="form-control">
    </div>
    <div class="form-group">
      <label>Body</label>
      <textarea id="body" name="body" rows="10" cols="33" class="form-control">
        <%= content?.data?.body %>
      </textarea>
    </div>
    <div class="d-flex justify-content-between">
      <div class="mr-2">
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </div>
  </form>
</div>
<%- await include(`${Deno.cwd()}${Deno.env.get('THEME')}templates/layout/footer.ejs`) %>
<link href="/libraries/ckeditor/ckeditor.css" type="text/css" rel="stylesheet">
<script src="/libraries/ckeditor/ckeditor.js" type="text/javascript"></script>
<script>
	ClassicEditor
		.create( document.querySelector('#body'), {
		} )
		.then( editor => {
			window.editor = editor;
		} )
		.catch( err => {
			console.error( err.stack );
		} );
</script>